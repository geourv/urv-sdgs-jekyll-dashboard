---
# File: pages/methods.html
# Purpose: Content page (methods) rendered with the default layout.
# Related files:
#   - _layouts/default.html
#   - assets/css/styles.css
#   - assets/js/site.js
# Safe edits:
#   - OK: Edit content and explanatory text; adjust chart config carefully
#   - Careful: Avoid renaming ids used by inline scripts (charts/controls) unless you update the JS accordingly
# Notes:
#   - Mermaid (if used) is loaded via per-page head injections; keep head_scripts/head_inline in front matter if present.
layout: default
title: "Qu√® hem fet?"
lang: ca
head_scripts:
  - https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js
head_inline: |
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: true,
          curve: 'basis'
        }
      });
    });
  </script>
---

<style>
.methods-page {
  --reading-measure: 92ch;
}

.methods-page > h1,
.methods-page > h2,
.methods-page > p,
.methods-page > section,
.methods-page > div,
.methods-page > ol,
.methods-page > ul {
  max-width: none;
}

.methods-page > h1 {
  margin-bottom: 0.8rem;
}

.methods-diagram-wrap {
  background: var(--site-widget-surface-soft);
  border: 1px solid var(--site-widget-border);
  border-radius: 10px;
  padding: 12px;
  margin: 0.7rem 0 1rem;
}

.methods-diagram-wrap .mermaid {
  width: 100%;
  overflow-x: auto;
}

.methods-diagram-caption {
  margin-top: 8px;
  font-style: italic;
  color: #4f5f70;
  text-align: center;
}

.methods-flow-list {
  list-style: none;
  counter-reset: method-step;
  margin: 0;
  padding: 0;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 14px;
}

.methods-flow-list > li {
  counter-increment: method-step;
  background: var(--site-widget-surface-soft);
  border: 1px solid var(--site-widget-border);
  border-top: 3px solid var(--site-card-separator);
  border-radius: 10px;
  padding: 12px 13px;
}

.methods-flow-list > li > h4 {
  margin: 0 0 0.55rem;
  font-size: 1.02rem;
  line-height: 1.35;
}

.methods-flow-list > li > h4::before {
  content: "Pas " counter(method-step) ". ";
  color: var(--site-accent-dark);
  font-weight: 800;
}

.methods-flow-list p {
  margin: 0 0 0.52rem;
  font-size: 0.95rem;
  line-height: 1.38;
}

.methods-flow-list p:last-child {
  margin-bottom: 0;
}

.methods-flow-list ul {
  margin: 0.35rem 0 0;
  padding-left: 1.15rem;
}

.methods-flow-list ul li {
  margin: 0 0 0.36rem;
  font-size: 0.93rem;
  line-height: 1.34;
}

.methods-section {
  margin-top: 1rem;
}

.methods-tools-grid {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

.methods-tools-grid > li {
  background: var(--site-widget-surface-soft);
  border: 1px solid var(--site-widget-border);
  border-radius: 10px;
  padding: 11px 12px;
}

.methods-tools-grid > li > strong {
  display: block;
  margin-bottom: 0.32rem;
}

.methods-tools-grid > li > p {
  margin: 0;
  font-size: 0.94rem;
  line-height: 1.35;
}

.methods-lower-grid {
  margin-top: 1rem;
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
  gap: 14px;
  align-items: start;
}

.methods-section-card {
  background: var(--site-widget-surface-soft);
  border: 1px solid var(--site-widget-border);
  border-radius: 10px;
  padding: 12px 13px;
}

.methods-section-card > h2 {
  margin-top: 0;
}

.methods-section-card p {
  max-width: none;
}

.methods-guide-images {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 14px;
  margin: 0.7rem 0 0.75rem;
}

.methods-guide-image {
  text-align: center;
}

.methods-guide-image img {
  width: 100%;
  max-width: 260px;
  height: auto;
}

.methods-guide-image figcaption {
  font-size: 0.84rem;
  color: #58697c;
  margin-top: 5px;
}

.methods-improvements {
  margin: 0;
  padding-left: 1.2rem;
}

.methods-improvements li {
  margin: 0 0 0.7rem;
}

.methods-improvements li:last-child {
  margin-bottom: 0;
}

.methods-improvements p {
  margin: 0;
}

@media screen and (max-width: 1500px) {
  .methods-flow-list,
  .methods-tools-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media screen and (max-width: 1100px) {
  .methods-lower-grid {
    grid-template-columns: 1fr;
  }
}

@media screen and (max-width: 760px) {
  .methods-flow-list,
  .methods-tools-grid,
  .methods-guide-images {
    grid-template-columns: 1fr;
  }
}
</style>

<!-- Header -->
<header class="w3-container" style="padding-top:22px">
  <h5><b><i class="fa fa-cog"></i> Qu√® hem fet?</b></h5>
</header>

<div class="w3-container readable-content methods-page">
  <h1>Metodologia</h1>

  <p>Amb l'objectiu d'avaluar la pres√®ncia dels ODS als ensenyaments de la Universitat Rovira i Virgili, s'ha emprat la metodologia seg√ºent: en primer lloc, t√®cniques de web scraping i mineria de textos per extreure els continguts de les guies docents; despr√©s, traducci√≥ a l'angl√®s per facilitar l'an√†lisi; finalment, an√†lisi de dades en R per identificar termes relacionats amb els ODS i estimar-ne la pres√®ncia als ensenyaments de la URV.</p>

  <h2>Flux de treball per a l'an√†lisi de les guies docents</h2>

  <div class="methods-diagram-wrap">
    <div class="mermaid">
flowchart TD
%% Classes de colors
classDef fase fill:#f9f,stroke:#333,stroke-width:2px,color:#000,font-weight:bold;
classDef process fill:#ffeb99,stroke:#333,stroke-width:1px,color:#000;
classDef data fill:#bbf,stroke:#333,stroke-width:1px,color:#000,font-style:italic;
classDef output fill:#bfb,stroke:#333,stroke-width:1px,color:#000;

%% FASE 1: Recopilaci√≥
A[üì• 1. Recopilaci√≥ de guies docents]:::fase -->
A1[üîó Web-scraping de guies docents]:::process
A1 --> A3{üìë Est√†ndard de la guia?}:::process
A3 -->|DOCnet 93%| A4[üñ• Acc√©s a iframe DOCnet]:::process
A3 -->|GUIDO 7%| B
A4 --> B

%% FASES 2, 3 i 4
B[üìù 2. Processament i extracci√≥ de dades]:::fase --> B1[üìä Extracci√≥ del contingut de les guies docents]
B1 --> C[üîç 3. An√†lisi de termes ODS]:::fase
C --> C1[üåê Traducci√≥ a l'angl√®s (LibreTranslate o Apertium)]
C1 --> C2[üßÆ Identificaci√≥ dels ODS amb text2SDG (R)]
C2 --> D[üìä 4. Generaci√≥ de visualitzacions i informes]:::fase

%% Sortida
D --> JSON[üíæ JSON estructurat]:::data
JSON --> Web[üåê P√†gina web interactiva]:::output
    </div>
    <div class="methods-diagram-caption">Elaboraci√≥ pr√≤pia</div>
  </div>

  <ol class="methods-flow-list">
    <li>
      <h4>Recopilar les guies docents de grau i m√†ster des de la web p√∫blica</h4>
      <p>Per obtenir el contingut dels ensenyaments, s'extreuen dades de les guies docents de les assignatures corresponents mitjan√ßant m√∫ltiples processos de <i>web scraping</i> (Firefox WebScraper Plugin).</p>
      <p>Un exemple d'enlla√ß d'ensenyament √©s: <a href="https://guiadocent.urv.cat/guido/public/centres/503/ensenyaments/3475/detall" target="_blank" rel="noopener noreferrer">https://guiadocent.urv.cat/guido/public/centres/503/ensenyaments/3475/detall</a>.</p>
      <p>En aquest cas, "503" identifica el centre (Facultat de Turisme i Geografia) i "3475" l'ensenyament (Grau en Geografia, An√†lisi Territorial i Sostenibilitat).</p>
    </li>

    <li>
      <h4>Processar les dades i extreure textos rellevants</h4>
      <p>La informaci√≥ es recupera en dos est√†ndards: <strong>DOCnet</strong> i <strong>GUIDO</strong>. DOCnet √©s encara present en moltes guies, mentre que GUIDO s'est√† desplegant progressivament.</p>
      <p>Per a DOCnet cal obtenir l'enlla√ß de l‚Äô<i>iframe</i>; per exemple: <a href="https://guiadocent.urv.cat/docnet/guia_docent/assignatures/print/?centre=21&ensenyament=2123&assignatura=21234114&any_academic=2025_26&idioma=cat" target="_blank" rel="noopener noreferrer">Enlla√ß DOCnet</a>.</p>
      <p>Per a GUIDO, l'acc√©s √©s per apartats; per exemple: <a href="https://guiadocent.urv.cat/guido/public/centres/498/ensenyaments/3545/assignatures/116896/guia_docent" target="_blank" rel="noopener noreferrer">Enlla√ß GUIDO</a>.</p>
      <p>S'extreuen descripci√≥, contingut, resultats d'aprenentatge, compet√®ncies i refer√®ncies, i s'organitzen en un <i>dataframe</i> amb el context de curs, ensenyament i centre.</p>
    </li>

    <li>
      <h4>Identificar termes ODS als textos</h4>
      <p>L'an√†lisi per identificar i quantificar ODS es basa en detecci√≥ de termes i m√®todes del paquet <strong>text2SDG</strong> en R. El contingut original en catal√† es tradueix a l'angl√®s (LibreTranslate, i de suport Apertium).</p>
      <p>Es van revisar diverses fonts de paraules clau i m√®todes:</p>
      <ul>
        <li>University of Toronto SDGs Keywords.</li>
        <li>Institut Teknologi Sepuluh Nopember.</li>
        <li>University of Auckland SDG mapping.</li>
        <li>JRC SDG Mapper.</li>
        <li>text2SDG (Meier, Mata i Wulff, 2022).</li>
      </ul>
      <p>Finalment, text2SDG es va escollir per utilitat i efici√®ncia en grans volums de text.</p>
    </li>

    <li>
      <h4>Generar visualitzacions i informes</h4>
      <p>Els ODS detectats es fusionen amb les metadades de les assignatures i s'exporten en un format JSON estructurat per centres, ensenyaments i cursos.</p>
      <p>Aquest format permet consultes r√†pides i iteratives per analitzar quins centres, programes i assignatures mostren major alineaci√≥ amb els ODS.</p>
    </li>
  </ol>

  <section class="methods-section">
    <h2>Eines utilitzades</h2>
    <ul class="methods-tools-grid">
      <li>
        <strong>Docker i Docker Compose</strong>
        <p>Desplegament i gesti√≥ dels serveis de neteja, transformaci√≥, traducci√≥ i an√†lisi.</p>
      </li>
      <li>
        <strong>Firefox WebScraper Plugin</strong>
        <p>Extracci√≥ automatitzada del contingut web de les guies docents.</p>
      </li>
      <li>
        <strong>R (dplyr, tidyr, stringr, readr, corpustools, purrr)</strong>
        <p>Neteja i preparaci√≥ de dades, i construcci√≥ de sortides per a web i informes.</p>
      </li>
      <li>
        <strong>R - text2sdg</strong>
        <p>Identificaci√≥ i avaluaci√≥ dels ODS i dels termes associats dins els textos.</p>
      </li>
      <li>
        <strong>LibreTranslate (contenidor)</strong>
        <p>Traducci√≥ autom√†tica de les descripcions a l'angl√®s dins el flux de processament.</p>
      </li>
    </ul>
  </section>

  <div class="methods-lower-grid">
    <section class="methods-section methods-section-card">
      <h2>Dificultats i limitacions</h2>
      <p>La variabilitat entre DOCnet i GUIDO complica l'extracci√≥ uniforme. Les difer√®ncies de format i d'acc√©s a continguts (especialment l‚Äô<i>iframe</i> de DOCnet) han obligat a mantenir fluxos de processament diferenciats.</p>
      <p>Tamb√© s'han detectat dades incompletes o mal formatejades (refer√®ncies, compet√®ncies i resultats), que en alguns casos requereixen revisi√≥ manual per garantir qualitat.</p>

      <div class="methods-guide-images">
        <figure class="methods-guide-image">
          <img src="../assets/logos/templates/guido.png" alt="Guia docent en format GUIDO">
          <figcaption>Guia docent en format GUIDO</figcaption>
        </figure>
        <figure class="methods-guide-image">
          <img src="../assets/logos/templates/docnet.png" alt="Guia docent en format DOCnet">
          <figcaption>Guia docent en format DOCnet</figcaption>
        </figure>
      </div>

      <p>En alguns ensenyaments tamb√© hi ha continguts ubicats en seccions no previstes de la guia docent, cosa que pot reduir coher√®ncia en la detecci√≥ ODS.</p>
    </section>

    <section class="methods-section methods-section-card">
      <h2>Possibles millores i treball futur</h2>
      <ul class="methods-improvements">
        <li>
          <p>Millorar el proc√©s de scraping amb eines natives d'R (<i>rvest</i>, <i>httr</i>) per guanyar control i tra√ßabilitat del flux d'extracci√≥.</p>
        </li>
        <li>
          <p>Refor√ßar la qualitat de traducci√≥ de termes t√®cnics i compostos incorporant preproc√©s contextual abans de l'enviament al traductor.</p>
        </li>
        <li>
          <p>Evolucionar les visualitzacions per facilitar una lectura m√©s immediata de la cobertura i les difer√®ncies per sistema/secci√≥.</p>
        </li>
        <li>
          <p>Ampliar la cobertura de dades a m√©s programes universitaris per millorar representativitat i robustesa anal√≠tica.</p>
        </li>
      </ul>
    </section>
  </div>
</div>
