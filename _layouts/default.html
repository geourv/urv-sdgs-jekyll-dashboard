<!--
File: _layouts/default.html
Purpose: Main layout wrapper: includes head/sidebar/footer and yields page content.
Related files:
  - _includes/head.html
  - _includes/sidebar.html
  - _includes/footer.html
Safe edits:
  - OK: Minor markup changes, add new include blocks
  - Careful: Changing element ids/classes used by assets/js/site.js can break mobile menu and overlay
-->

<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'ca' }}">
<head>
  <title>{{ page.title | default: site.title }}</title>
  {% include head.html %}
  {% if page.head_styles %}
    {% for href in page.head_styles %}
      {% if href contains '://' or href contains '//' %}
        <link rel="stylesheet" href="{{ href }}">
      {% else %}
        <link rel="stylesheet" href="{{ href | relative_url }}">
      {% endif %}
    {% endfor %}
  {% endif %}
  {% if page.head_scripts %}
    {% for src in page.head_scripts %}
      {% if src contains '://' or src contains '//' %}
        <script src="{{ src }}"></script>
      {% else %}
        <script src="{{ src | relative_url }}"></script>
      {% endif %}
    {% endfor %}
  {% endif %}
  {% if page.head_inline %}
    {{ page.head_inline }}
  {% endif %}
</head>
<body class="w3-light-grey">

  {% include sidebar.html %}

  <button
    id="desktopSidebarToggle"
    class="site-desktop-sidebar-toggle w3-button w3-hide-small w3-hide-medium"
    type="button"
    onclick="if(window.toggleDesktopSidebar){window.toggleDesktopSidebar();}else{var collapsed=document.body.classList.toggle('sidebar-collapsed');var icon=this.querySelector('i');if(icon){icon.className=collapsed?'fa fa-bars':'fa fa-angle-left';}var label=collapsed?'Mostra menú lateral':'Oculta menú lateral';this.setAttribute('aria-label',label);this.setAttribute('title',label);this.setAttribute('aria-expanded',String(!collapsed));try{localStorage.setItem('sidebar:desktopCollapsed',collapsed?'1':'0');}catch(_){}}return false;"
    aria-label="Oculta menú lateral"
    aria-expanded="true"
    title="Oculta menú lateral">
    <i class="fa fa-angle-left" aria-hidden="true"></i>
  </button>

  <button id="mobileMenuBtn" class="site-mobile-menu w3-button w3-hide-large" onclick="w3_open();" aria-label="Obrir menú lateral">
    <i class="fa fa-bars"></i> Menú
  </button>

  <div class="w3-main">
    {{ content }}
  </div>
  {% include footer.html %}

  {% include back_to_top.html %}

  <script src="{{ '/assets/js/site.js' | relative_url }}" defer></script>
</body>
</html>
